### DB RAG API - HTTP Collection
### Use this file with VS Code REST Client extension or similar tools

@base_url = http://localhost:9000
@api_key = minha-api-key-AuTHvhpVGq_DHiBkg4wi_l7LxWathUy-pLNsar_K-oc

### API Information
GET {{base_url}}/

### Health Check
GET {{base_url}}/health

### System Status (requires auth)
GET {{base_url}}/status
Authorization: Bearer {{api_key}}

### List Providers (requires auth)
GET {{base_url}}/providers
Authorization: Bearer {{api_key}}

### Switch LLM Provider (requires auth)
POST {{base_url}}/switch-provider
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "provider": "ollama",
  "type": "llm"
}

### Switch Embedding Provider (requires auth)
POST {{base_url}}/switch-provider
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "provider": "openai", 
  "type": "embedding"
}

### Natural Language Query - Customer Revenue (requires auth)
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "query": "What are the top 5 customers by revenue?",
  "provider": "ollama"
}

### Natural Language Query - Product Analysis (requires auth)
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "query": "Show me products with low stock levels",
  "provider": "ollama"
}

### Natural Language Query - Recent Orders (requires auth)
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "query": "Show me all orders from the last 30 days"
}

### Natural Language Query - Database Overview (requires auth)
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "query": "What tables are available in this database?"
}

### Error Handling Examples

### Invalid Query Type
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer {{api_key}}

{
  "query": "test query",
  "query_type": "invalid_type"
}

### Missing Authorization
POST {{base_url}}/query
Content-Type: application/json

{
  "query": "test query"
}

### Invalid API Key
POST {{base_url}}/query
Content-Type: application/json
Authorization: Bearer invalid-key

{
  "query": "test query"
}
